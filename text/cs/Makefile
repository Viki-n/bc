export TEXINPUTS=../tex//:

usual: prace.pdf tidy

all: prace.pdf

# LaTeX je potreba spustit nekolikrat, aby spravne spocital odkazy
prace.pdf: prace.tex $(wildcard *.tex) literatura.bib prace.xmpdata $(wildcard */*.pdf) $(wildcard */*.png)
	pdflatex --shell-escape $<
	bibtex prace
	texindy -L czech -M lang/czech/utf8 -M /media/sf_shared/bp/text/cs/instyle.xdy -o ~/prace.ind prace.idx
	mv ~/prace.ind ./prace.ind
	: xindy -M texindy -M indexstyle -C utf8 -L czech -o prace.ind prace.idx
	pdflatex --shell-escape $<
	pdflatex --shell-escape $<

quick: prace.tex $(wildcard *.tex) literatura.bib prace.xmpdata $(wildcard */*.pdf) $(wildcard */*.png)
	pdflatex --shell-escape $<


clean: tidy
	rm -f prace.pdf

tidy:
	rm -f *.log *.idx *.ind *.dvi *.aux *.toc *.lof *.lot *.out *.bbl *.blg *.xmpi *.xdy

git:
	git commit -am"This is autogenerated message"
	git push

leaving: usual git

.PHONY: leaving git tidy clean all usual
